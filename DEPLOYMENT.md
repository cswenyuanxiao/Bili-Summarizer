# ğŸš€ éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£æä¾›ä¸‰ç§äº‘å¹³å°éƒ¨ç½²æ–¹æ¡ˆï¼Œè®©æ‚¨çš„ Bili-Summarizer ä¸Šçº¿å¹¶æµ‹è¯•èƒ½å¦åœ¨äº‘ç¯å¢ƒä¸­çˆ¬å– B ç«™æ•°æ®ã€‚

---

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

1. **ç¡®ä¿ä»£ç å·²æ¨é€åˆ° GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/bili-summarizer.git
   git push -u origin main
   ```

2. **å‡†å¤‡ç¯å¢ƒå˜é‡**
   - `GOOGLE_API_KEY`: ä» [Google AI Studio](https://aistudio.google.com/app/apikey) è·å–

---

## ğŸ¯ æ–¹æ¡ˆ 1: Railway (æ¨èï¼Œæœ€ç®€å•)

### ä¼˜ç‚¹
- âœ… å…è´¹é¢åº¦å……è¶³ï¼ˆæ¯æœˆ $5ï¼‰
- âœ… è‡ªåŠ¨éƒ¨ç½² Docker
- âœ… æ”¯æŒæŒä¹…åŒ–å­˜å‚¨

### éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Railway](https://railway.app/)**
2. ç‚¹å‡» "Start a New Project"
3. é€‰æ‹© "Deploy from GitHub repo"
4. æˆæƒå¹¶é€‰æ‹©æ‚¨çš„ `bili-summarizer` ä»“åº“
5. Railway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `railway.json` å’Œ `Dockerfile`
6. **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼š
   - è¿›å…¥é¡¹ç›® â†’ Variables
   - æ·»åŠ  `GOOGLE_API_KEY`
7. éƒ¨ç½²å®Œæˆåè·å¾—å…¬ç½‘ URLï¼ˆå¦‚ `https://bili-summarizer-xxx.railway.app`ï¼‰

### æµ‹è¯• B ç«™çˆ¬å–

éƒ¨ç½²æˆåŠŸåï¼Œè®¿é—®æ‚¨çš„åº”ç”¨ URLï¼Œè¾“å…¥ä¸€ä¸ª B ç«™è§†é¢‘é“¾æ¥æµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸ä¸‹è½½å’Œæ€»ç»“ã€‚

---

## ğŸ¯ æ–¹æ¡ˆ 2: Render

### ä¼˜ç‚¹
- âœ… å®Œå…¨å…è´¹ï¼ˆæœ‰ä½¿ç”¨é™åˆ¶ï¼‰
- âœ… è‡ªåŠ¨ HTTPS
- âš ï¸ å…è´¹ç‰ˆä¼šä¼‘çœ ï¼ˆ15 åˆ†é’Ÿæ— æ´»åŠ¨ï¼‰

### éƒ¨ç½²æ­¥éª¤

1. **è®¿é—® [Render](https://render.com/)**
2. ç‚¹å‡» "New" â†’ "Web Service"
3. è¿æ¥ GitHub ä»“åº“
4. Render ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° `render.yaml`
5. **è®¾ç½®ç¯å¢ƒå˜é‡**ï¼š
   - `GOOGLE_API_KEY`: å¡«å…¥æ‚¨çš„å¯†é’¥
6. ç‚¹å‡» "Create Web Service"
7. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰

### âš ï¸ æ³¨æ„äº‹é¡¹
- å…è´¹ç‰ˆç£ç›˜ç©ºé—´æœ‰é™ï¼ˆ512MBï¼‰ï¼Œå¯èƒ½ä¸å¤Ÿå­˜å‚¨è§†é¢‘
- å»ºè®®ä¿®æ”¹ä»£ç ï¼Œæ€»ç»“å®Œæˆåç«‹å³åˆ é™¤è§†é¢‘æ–‡ä»¶

---

## ğŸ¯ æ–¹æ¡ˆ 3: Fly.io

### ä¼˜ç‚¹
- âœ… å…¨çƒè¾¹ç¼˜ç½‘ç»œ
- âœ… å…è´¹é¢åº¦ï¼ˆ3 ä¸ªå…±äº« CPU VMï¼‰
- âœ… æ›´æ¥è¿‘ Docker åŸç”Ÿä½“éªŒ

### éƒ¨ç½²æ­¥éª¤

1. **å®‰è£… Fly CLI**
   ```bash
   curl -L https://fly.io/install.sh | sh
   ```

2. **ç™»å½• Fly.io**
   ```bash
   fly auth login
   ```

3. **å¯åŠ¨åº”ç”¨ï¼ˆåœ¨é¡¹ç›®ç›®å½•ï¼‰**
   ```bash
   cd /Users/wenyuan/Desktop/summarizer
   fly launch
   ```
   - åº”ç”¨åç§°ï¼š`bili-summarizer`ï¼ˆæˆ–è‡ªå®šä¹‰ï¼‰
   - é€‰æ‹©åŒºåŸŸï¼šSingapore (sin) æˆ– Hong Kong (hkg)
   - ä¸åˆ›å»ºæ•°æ®åº“
   - ä¸åˆ›å»º Redis

4. **è®¾ç½®ç¯å¢ƒå˜é‡**
   ```bash
   fly secrets set GOOGLE_API_KEY="ä½ çš„å¯†é’¥"
   ```

5. **éƒ¨ç½²**
   ```bash
   fly deploy
   ```

6. **æŸ¥çœ‹çŠ¶æ€**
   ```bash
   fly status
   fly open  # åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨
   ```

---

## ğŸ§ª æµ‹è¯• B ç«™åçˆ¬è™«

éƒ¨ç½²æˆåŠŸåï¼Œä¾æ¬¡æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

### æµ‹è¯• 1: å…¬å¼€è§†é¢‘ï¼ˆæ— å­—å¹•ï¼‰
```
https://www.bilibili.com/video/BV1xx411c7mD
```
- âœ… èƒ½ä¸‹è½½ï¼šè¯´æ˜äº‘æœåŠ¡å™¨ IP æœªè¢«å°
- âŒ 403/429 é”™è¯¯ï¼šIP è¢«é™æµæˆ–å°ç¦

### æµ‹è¯• 2: æœ‰å­—å¹•è§†é¢‘
```
https://www.bilibili.com/video/BV1QB4y1X7t3
```
- âœ… èƒ½è·å–å­—å¹•ï¼šä¼˜å…ˆä½¿ç”¨å­—å¹•æ¨¡å¼æˆåŠŸ
- âš ï¸ å­—å¹•ä¸ºç©ºä½†èƒ½ä¸‹è½½è§†é¢‘ï¼šå¯èƒ½éœ€è¦è§†é¢‘æ¨¡å¼

### æµ‹è¯• 3: é«˜æ¸…è§†é¢‘
```
https://www.bilibili.com/video/BV1GJ411x7h7
```
- âœ… æ­£å¸¸ä¸‹è½½ï¼šæ— é€Ÿåº¦é™åˆ¶
- âš ï¸ ä¸‹è½½è¶…æ—¶ï¼šå¯èƒ½æœ‰å¸¦å®½é™åˆ¶

---

## ğŸ”§ å¯èƒ½é‡åˆ°çš„é—®é¢˜

### é—®é¢˜ 1: IP è¢«å°ç¦

**ç—‡çŠ¶**ï¼š
```
ERROR: unable to download video data: HTTP Error 403: Forbidden
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **ä½¿ç”¨ä»£ç†**ï¼ˆä¿®æ”¹ `downloader.py`ï¼‰ï¼š
   ```python
   ydl_opts = {
       'proxy': 'http://your-proxy:port',
       # ...
   }
   ```

2. **é™ä½è¯·æ±‚é¢‘ç‡**ï¼ˆæ·»åŠ å»¶è¿Ÿï¼‰
3. **åˆ‡æ¢äº‘æœåŠ¡å•†**ï¼ˆä¸åŒ IP æ®µï¼‰

### é—®é¢˜ 2: ç£ç›˜ç©ºé—´ä¸è¶³

**ç—‡çŠ¶**ï¼š
```
No space left on device
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
ä¿®æ”¹ `main.py`ï¼Œä¸‹è½½åç«‹å³æ¸…ç†ï¼š
```python
finally:
    if video_path and video_path.exists():
        video_path.unlink()  # ç«‹å³åˆ é™¤
```

### é—®é¢˜ 3: æ„å»ºè¶…æ—¶

**ç—‡çŠ¶**ï¼š
```
Build exceeded maximum time limit
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å‡å°‘ Docker é•œåƒå¤§å°
- ä½¿ç”¨é¢„æ„å»ºåŸºç¡€é•œåƒ

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| å¹³å° | å…è´¹é¢åº¦ | å†·å¯åŠ¨ | æŒä¹…åŒ– | æ¨èåº¦ |
|------|---------|--------|--------|--------|
| **Railway** | $5/æœˆ | æ—  | âœ… | â­â­â­â­â­ |
| **Render** | âˆ | 1-2min | âš ï¸ | â­â­â­ |
| **Fly.io** | 3 VM | æ—  | âœ… | â­â­â­â­ |

---

## ğŸ¯ æ¨èæ–¹æ¡ˆ

1. **Railway** - æœ€é€‚åˆæµ‹è¯•å’Œå°è§„æ¨¡ä½¿ç”¨
2. **Fly.io** - é€‚åˆéœ€è¦å…¨çƒåŠ é€Ÿçš„åœºæ™¯
3. **Render** - é€‚åˆæç®€éƒ¨ç½²ä½†è®¿é—®é‡å°

---

## ğŸ“ åç»­ä¼˜åŒ–

å¦‚æœäº‘ç«¯çˆ¬å–æˆåŠŸï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **æ·»åŠ ä»£ç†æ± **ï¼šè½®æ¢ IP é¿å…å°ç¦
2. **ä½¿ç”¨ CDN**ï¼šåŠ é€Ÿè§†é¢‘ä¸‹è½½
3. **é˜Ÿåˆ—ç³»ç»Ÿ**ï¼šå¤„ç†å¹¶å‘è¯·æ±‚
4. **ç¼“å­˜æœºåˆ¶**ï¼šé¿å…é‡å¤ä¸‹è½½

---

## ğŸ†˜ è·å–å¸®åŠ©

- Railway: https://docs.railway.app/
- Render: https://render.com/docs
- Fly.io: https://fly.io/docs/
